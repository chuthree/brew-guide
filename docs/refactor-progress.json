{
  "project": "路由重构 - 从模态框历史栈迁移到 URL 状态管理",
  "created": "2026-01-06",
  "status": "in-progress",
  "currentPhase": 1,
  "approach": "使用 URL searchParams 管理详情页状态，兼容静态导出模式",
  "urlPattern": "/?panel=bean&id=xxx 或 /?panel=note&id=xxx",
  "phases": [
    {
      "id": 1,
      "name": "基础设施准备",
      "status": "done",
      "tasks": [
        {
          "id": "1.1",
          "name": "创建路由工具函数",
          "description": "封装导航方法，使用 searchParams",
          "status": "done",
          "files": ["src/lib/navigation/router.ts"]
        },
        {
          "id": "1.2",
          "name": "创建 useDetailPanel hook",
          "description": "读取/写入 URL 状态，管理详情面板",
          "status": "done",
          "files": ["src/lib/hooks/useDetailPanel.ts"]
        },
        {
          "id": "1.3",
          "name": "创建 DetailPanelContainer",
          "description": "根据 URL 渲染对应详情组件",
          "status": "done",
          "files": [
            "src/components/layout/DetailPanelContainer.tsx",
            "src/app/layout.tsx"
          ]
        }
      ]
    },
    {
      "id": 2,
      "name": "咖啡豆详情页路由化（试点）",
      "status": "pending",
      "tasks": [
        {
          "id": "2.1",
          "name": "创建纯展示 BeanDetail 组件",
          "description": "从 BeanDetailModal 提取，接收 beanId",
          "status": "pending",
          "files": ["src/components/coffee-bean/Detail/BeanDetail.tsx"]
        },
        {
          "id": "2.2",
          "name": "集成到 DetailPanelContainer",
          "description": "URL panel=bean 时渲染 BeanDetail",
          "status": "pending",
          "files": ["src/components/layout/DetailPanelContainer.tsx"]
        },
        {
          "id": "2.3",
          "name": "更新咖啡豆列表点击行为",
          "description": "点击豆子 -> 更新 URL 而非 setState",
          "status": "pending",
          "files": []
        }
      ]
    },
    {
      "id": 3,
      "name": "笔记详情页路由化",
      "status": "pending",
      "tasks": []
    },
    {
      "id": 4,
      "name": "清理旧代码",
      "status": "pending",
      "tasks": []
    }
  ],
  "notes": [
    "静态导出不支持动态路由，改用 searchParams",
    "URL 变化自动触发浏览器历史栈",
    "保持向后兼容，旧 modalHistory 暂时保留"
  ]
}
